<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: Settings.gravatar.microposts),
    micropost.user %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="content">
    <%= micropost.content %>
    <%= image_tag micropost.picture.url if micropost.picture? %>
  </span>
  <span class="timestamp">
    <%= t("subContent.micropost.post",
      time: time_ago_in_words(micropost.created_at)) %>
    <% if current_user?(micropost.user) %>
      <%= link_to t("label.form.micropost.delete"), micropost, method: :delete,
      data: {confirm: t("label.form.micropost.confirmDelete")} %>
    <% end %>
  </span>
  <div>
      <b>Comment_View</b>
      <p class="listComment" id="listComment-<%= micropost.id %>">
        <%= render "shared/comment", micropost_id: micropost.id %>
      </p>
      <input class="CommentBox" id="CommentBox<%= micropost.id %>" type="text"
          placeholder="Leave Your Comment Here ... ">
  </div>
</li>

<script type="text/javascript">
  $("#CommentBox<%= micropost.id %>").keypress(function(e){
    if (e.which == 13) {
      $.ajax({
      url: "/comment",
      type: "POST",
      data: {
         micropost_id: parseInt(e.target.id.slice(10,e.target.id.length)),
         content: e.target.value.toString()
      }
      }).done(function(result) {
         $("#listComment-<%= micropost.id%>").append(`<p>${result.user} : ${result.content}</p>`);
         $(".CommentBox").val("");
      });
    }
  })
</script>
